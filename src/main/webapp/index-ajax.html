<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns="http://www.w3.org/1999/html">
<head>
    <meta content="text/html; charset=UTF-8" http-equiv="content-type"/>
    <title>Home</title>
</head>
<body class="lift:content_id=main">
<div id="main" data-lift="surround?with=default;at=content">

    <section>
        <h3>Ajax File Upload Recipe - Lift's cookbook example</h3>

        <h1>Drag files onto this page</h1>

        <input id="fileupload" type="file" name="files[]" data-url="upload" multiple>

        <div id="progress" style="width:20em; border: 1pt solid silver; display: none">
            <div id="progress-bar" style="background: green; height: 1em; width:0%"></div>
        </div>

        <script>
            $(function () {
                $('#fileupload').fileupload({
                    dataType: 'json',
                    add: function (e,data) {
                        $('#progress-bar').css('width', '0%');
                        $('#progress').show();
                        data.submit();
                    },
                    progressall: function (e, data) {
                        var progress = parseInt(data.loaded / data.total * 100, 10) + '%';
                        $('#progress-bar').css('width', progress);
                    },
                    done: function (e, data) {
                        $.each(data.files, function (index, file) {
                            $('<p/>').text(file.name).appendTo(document.body);
                        });
                        $('#progress').fadeOut();
                    }
                });
            });
        </script>

    </section>

    <section>
        <h4>Show uploaded images</h4>
        TODO - find a good solution for it...
    </section>

</div>
</body>
</html>

